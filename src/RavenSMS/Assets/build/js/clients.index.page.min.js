"function"!=typeof Object.create&&(Object.create=function(t){function i(){}return i.prototype=t,new i}),function(o,i){"use strict";var s={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(t,i){this.prepareOptions(t,o.toast.options),this.process()},prepareOptions:function(t,i){var s={};"string"==typeof t||t instanceof Array?s.text=t:s=t,this.options=o.extend({},i,s)},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate()},setup:function(){var t="";if(this._toastEl=this._toastEl||o("<div></div>",{class:"jq-toast-single"}),t+='<span class="jq-toast-loader"></span>',this.options.allowToastClose&&(t+='<span class="close-jq-toast-single">&times;</span>'),this.options.text instanceof Array){this.options.heading&&(t+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),t+='<ul class="jq-toast-ul">';for(var i=0;i<this.options.text.length;i++)t+='<li class="jq-toast-li" id="jq-toast-item-'+i+'">'+this.options.text[i]+"</li>";t+="</ul>"}else this.options.heading&&(t+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),t+=this.options.text;this._toastEl.html(t),!1!==this.options.bgColor&&this._toastEl.css("background-color",this.options.bgColor),!1!==this.options.textColor&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),!1!==this.options.icon&&(this._toastEl.addClass("jq-has-icon"),-1!==o.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("jq-icon-"+this.options.icon)),!1!==this.options.class&&this._toastEl.addClass(this.options.class)},position:function(){"string"==typeof this.options.position&&-1!==o.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:o(i).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:o(i).outerWidth()/2-this._container.outerWidth()/2,top:20}):"mid-center"===this.options.position?this._container.css({left:o(i).outerWidth()/2-this._container.outerWidth()/2,top:o(i).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"==typeof this.options.position?this._container.css({top:this.options.position.top||"auto",bottom:this.options.position.bottom||"auto",left:this.options.position.left||"auto",right:this.options.position.right||"auto"}):this._container.addClass("bottom-left")},bindToast:function(){var i=this;this._toastEl.on("afterShown",function(){i.processLoader()}),this._toastEl.find(".close-jq-toast-single").on("click",function(t){t.preventDefault(),"fade"===i.options.showHideTransition?(i._toastEl.trigger("beforeHide"),i._toastEl.fadeOut(function(){i._toastEl.trigger("afterHidden")})):"slide"===i.options.showHideTransition?(i._toastEl.trigger("beforeHide"),i._toastEl.slideUp(function(){i._toastEl.trigger("afterHidden")})):(i._toastEl.trigger("beforeHide"),i._toastEl.hide(function(){i._toastEl.trigger("afterHidden")}))}),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",function(){i.options.beforeShow()}),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",function(){i.options.afterShown()}),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",function(){i.options.beforeHide()}),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",function(){i.options.afterHidden()})},addToDom:function(){var t,i=o(".jq-toast-wrap");0===i.length?(i=o("<div></div>",{class:"jq-toast-wrap"}),o("body").append(i)):this.options.stack&&!isNaN(parseInt(this.options.stack,10))||i.empty(),i.find(".jq-toast-single:hidden").remove(),i.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)&&0<(t=i.find(".jq-toast-single").length-this.options.stack)&&o(".jq-toast-wrap").find(".jq-toast-single").slice(0,t).remove(),this._container=i},canAutoHide:function(){return!1!==this.options.hideAfter&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||!1===this.options.loader)return!1;var t=this._toastEl.find(".jq-toast-loader"),i=(this.options.hideAfter-400)/1e3+"s",s=this.options.loaderBg,o=(o=t.attr("style")||"").substring(0,o.indexOf("-webkit-transition"));t.attr("style",o+="-webkit-transition: width "+i+" ease-in;                       -o-transition: width "+i+" ease-in;                       transition: width "+i+" ease-in;                       background-color: "+s+";").addClass("jq-toast-loaded")},animate:function(){var t=this;this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn(function(){t._toastEl.trigger("afterShown")}):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown(function(){t._toastEl.trigger("afterShown")}):this._toastEl.show(function(){t._toastEl.trigger("afterShown")}),this.canAutoHide()&&i.setTimeout(function(){"fade"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut(function(){t._toastEl.trigger("afterHidden")})):"slide"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp(function(){t._toastEl.trigger("afterHidden")})):(t._toastEl.trigger("beforeHide"),t._toastEl.hide(function(){t._toastEl.trigger("afterHidden")}))},(t=this).options.hideAfter)},reset:function(t){("all"===t?o(".jq-toast-wrap"):this._toastEl).remove()},update:function(t){this.prepareOptions(t,this.options),this.setup(),this.bindToast()}};o.toast=function(t){var i=Object.create(s);return i.init(t,this),{reset:function(t){i.reset(t)},update:function(t){i.update(t)}}},o.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}}(jQuery,window,document),$('a[data-bs-toggle="tab"]').on("click",function(t){loadData()});let clients=[];function loadData(){$.ajax({url:"/ravenSMS/clients/index/?handler=clients",data:{pageIndex:1,pageSize:5,searchQuery:$("#search-query").val(),Status:$("nav#clients-status a.active").attr("value"),phoneNumbers:[]},success:function(t){clients=t.data;const i=$("#clients_table");$("#clients_table > tbody").empty(),$.each(clients,function(){i.append(buildTableRow(this))}),SetPagination(t.pagination.rowsCount,t.pagination.pageIndex,t.pagination.pageSize)}})}function buildTableRow(t){let i=`<tr>
        <td style="max-width:150px" class="cell">${t.id}</td>
        <td class="cell"><span class="truncate">${t.name}</span></td>
        <td class="cell">${GetStatusSpan(t.status)}</td>
        <td class="cell fit">`;return 3!=t.status&&(i+=`<a class="btn-sm app-btn-secondary" href="Clients/Preview/${t.id}">View</a>`),3==t.status&&(i+=`<a class="btn-sm app-btn-secondary ms-2" href="Clients/Setup/${t.id}">Setup</a>`),i+=`<button class="btn-sm app-btn-secondary ms-2" onClick="deleteClient('${t.id}')">Delete</button></td></tr>`,i}function SetPagination(t,i,s){const o=$("#paginator");o.empty(),o.append(`
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
            </li>
        `);const e=paginate(t,i,s);$.each(e.pages,function(){o.append(`<li class="page-item ${this==e.currentPage?"active":""}"><a class="page-link" href="#">${this}</a></li>`)}),o.append(`
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        `)}function GetStatusSpan(t){switch(t){case 0:return'<span class="badge bg-warning">UnActive</span>';case 1:return'<span class="badge bg-success">Connected</span>';case 2:return'<span class="badge bg-danger">Disconnected</span>';default:return'<span class="badge bg-danger">Require setup</span>'}}function deleteClient(t){$.get("/ravenSMS/clients/index/?handler=RemoveClient&clientId="+t).done(function(t){return t.isSuccess?($.toast({heading:"Success",text:"client has been deleted successfully.",showHideTransition:"slide",position:"top-right",icon:"success"}),void loadData()):void $.toast({heading:"Failed to resend",text:"<p>failed to delete the client, error message:<br/>"+t.error+"</p>",showHideTransition:"fade",position:"top-right",icon:"error"})})}loadData();